#!/usr/bin/env bash
#
# Emoji Menu
#
# Quickly find emojis and copy to clipboard.
#
#
# To install:
#
# 1. Clean-up https://unicode.org/Public/emoji/11.0/emoji-test.txt
#    grep -Po '(?<=   #).*'
#
# 2. Install xclip and rofi
#    sudo apt install xclip rofi
#
# 3. Assign to a keyboard combination
#    Try xbindkeys
#

set -e

# Config dir
EMOJI_MENU_DB=${EMOJI_MENU_DB:-"$HOME/.emoji-menu-db"}

# Default DB
if [ ! -e "$EMOJI_MENU_DB" ]; then
  wget -o "$EMOJI_MENU_DB" 'http://bit.ly/emoji-menu-db'
fi

# Rofi can handle large inputs and emojis
rofi -p 'ðŸ”' -width 610 -dmenu \
  < "$EMOJI_MENU_DB" \
  | grep -oP '^[^\s]+' \
  | tr -d '\n' \
  | xclip -selection clipboard

