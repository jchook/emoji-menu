#!/usr/bin/env bash
#
# Emoji Menu
#
# Quickly find emojis and copy to clipboard.
#
#
# To install:
#
# 1. Clean-up https://unicode.org/Public/emoji/11.0/emoji-test.txt
#    grep -Po '(?<=   #).*'
#
# 2. Install xclip and rofi
#    sudo apt install xclip rofi
#
# 3. Assign to a keyboard combination
#    Try xbindkeys
#

set -e

# Config dir
EMOJI_MENU_DB=${EMOJI_MENU_DB:-"$HOME/.emoji-menu-db"}

# Default DB
if [ ! -e "$EMOJI_MENU_DB" ]; then
  curl -s 'https://unicode.org/Public/emoji/11.0/emoji-test.txt' \
    | grep -oP '(?<=   #).*' \
    > "$EMOJI_MENU_DB"
fi

# Rofi can handle large inputs and emojis
rofi -p 'üîç' -width 610 -dmenu \
  < "$EMOJI_MENU_DB" \
  | grep -oP '^[^\s]+' \
  | tr -d '\n' \
  | xclip -selection clipboard

